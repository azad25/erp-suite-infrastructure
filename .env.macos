# macOS Optimized Environment Configuration for ERP Suite
# This configuration is specifically tuned for macOS Docker Desktop performance

# ============================================================================
# ENVIRONMENT SETTINGS
# ============================================================================
COMPOSE_PROJECT_NAME=erp-suite-macos
NODE_ENV=development
LOG_LEVEL=warn

# ============================================================================
# NETWORK CONFIGURATION (macOS optimized)
# ============================================================================
NETWORK_SUBNET=172.20.0.0/16

# ============================================================================
# DATABASE CONFIGURATION (macOS optimized - reduced memory usage)
# ============================================================================

# PostgreSQL (Reduced memory for macOS)
POSTGRES_DB=erp_system
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_PORT=5432
POSTGRES_MULTIPLE_DATABASES=erp_auth,erp_core,erp_crm,erp_hrm,erp_finance,erp_inventory,erp_projects
# macOS Memory optimization settings
POSTGRES_SHARED_BUFFERS=32MB
POSTGRES_EFFECTIVE_CACHE_SIZE=64MB
POSTGRES_WORK_MEM=1MB
POSTGRES_MAINTENANCE_WORK_MEM=16MB
POSTGRES_MAX_CONNECTIONS=15

# MongoDB (Reduced for macOS)
MONGODB_ROOT_USERNAME=root
MONGODB_ROOT_PASSWORD=password
MONGODB_DATABASE=erp_analytics
MONGODB_PORT=27017
# Multiple MongoDB databases for different modules
MONGODB_DATABASES=erp_analytics,erp_logs,erp_ai_conversations,erp_audit_trail,erp_notifications,erp_sessions,erp_cache

# Redis (Optimized for macOS)
REDIS_PASSWORD=redispassword
REDIS_PORT=6379

# Elasticsearch (Significantly reduced for macOS)
ELASTIC_PASSWORD=password
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_JAVA_OPTS=-Xms128m -Xmx128m

# ============================================================================
# MESSAGE BROKER CONFIGURATION (macOS optimized)
# ============================================================================

# Kafka (Reduced memory for macOS)
KAFKA_PORT=9092
KAFKA_INTERNAL_PORT=29092
KAFKA_CLUSTER_ID=MkU3OEVBNTcwNTJENDM2Qk

# ============================================================================
# API LAYER CONFIGURATION
# ============================================================================

# gRPC Services
GRPC_AUTH_PORT=50051
GRPC_CRM_PORT=50052
GRPC_HRM_PORT=50053
GRPC_FINANCE_PORT=50054
GRPC_INVENTORY_PORT=50055
GRPC_PROJECT_PORT=50056

# Service Registry (Consul)
CONSUL_PORT=8500
CONSUL_DNS_PORT=8600

# ============================================================================
# LOGGING (Reduced for macOS performance)
# ============================================================================

# Kibana
KIBANA_PORT=5601

# Qdrant
QDRANT_HTTP_PORT=6333
QDRANT_GRPC_PORT=6334

# ============================================================================
# DEVELOPMENT TOOLS (Lightweight alternatives for macOS)
# ============================================================================

# Adminer (instead of pgAdmin for lower memory usage)
PGADMIN_PORT=8081
PGADMIN_EMAIL=admin@erp.com
PGADMIN_PASSWORD=admin

# Mongo Express
MONGO_EXPRESS_PORT=8082
MONGO_EXPRESS_USERNAME=admin
MONGO_EXPRESS_PASSWORD=pass

# Redis Commander
REDIS_COMMANDER_PORT=8083

# Kafka UI
KAFKA_UI_PORT=8084

# ============================================================================
# APPLICATION SERVICES (macOS optimized)
# ============================================================================

# Auth Service
AUTH_SERVICE_HTTP_PORT=8080
AUTH_SERVICE_GRPC_PORT=50051
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRY=24h

# API Gateway
API_GATEWAY_PORT=8000

# Log Service
LOG_SERVICE_HTTP_PORT=8001
LOG_SERVICE_GRPC_PORT=50052

# Frontend
FRONTEND_PORT=3000
NEXTAUTH_SECRET=your-super-secret-nextauth-key-change-in-production
NEXT_TELEMETRY_DISABLED=1

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# External URLs
EXTERNAL_API_URL=http://localhost:8000
EXTERNAL_GRAPHQL_URL=http://localhost:4000/graphql
EXTERNAL_WS_URL=http://localhost:3001

# ============================================================================
# FEATURE FLAGS (macOS optimized - minimal features enabled)
# ============================================================================

# Enable/disable services (reduced for macOS performance)
ENABLE_LOGGING=true
ENABLE_DEV_TOOLS=true
ENABLE_AI_SERVICES=false
ENABLE_FULL_STACK=true

# Service profiles (minimal for macOS)
COMPOSE_PROFILES=infrastructure,dev-tools,full-stack

# ============================================================================
# macOS SPECIFIC OPTIMIZATIONS
# ============================================================================

# Docker Desktop optimizations
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Reduce health check frequency for macOS
HEALTH_CHECK_INTERVAL=120s
HEALTH_CHECK_TIMEOUT=30s
HEALTH_CHECK_RETRIES=2

# File system optimizations for macOS
WATCHPACK_POLLING=false
CHOKIDAR_USEPOLLING=false

# Memory limits for macOS (conservative)
POSTGRES_MEMORY_LIMIT=128M
MONGODB_MEMORY_LIMIT=128M
REDIS_MEMORY_LIMIT=64M
ELASTICSEARCH_MEMORY_LIMIT=256M
KAFKA_MEMORY_LIMIT=256M