# ERP Suite Production Environment Configuration
# This file contains environment-specific settings for production

# ============================================================================
# ENVIRONMENT
# ============================================================================
ERP_ENVIRONMENT=production
SERVICE_VERSION=1.0.0

# ============================================================================
# DATABASE CONNECTIONS
# ============================================================================

# PostgreSQL (Primary relational database)
POSTGRES_HOST=${POSTGRES_HOST}
POSTGRES_PORT=${POSTGRES_PORT:-5432}
POSTGRES_USER=${POSTGRES_USER}
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
POSTGRES_SSL_MODE=require
POSTGRES_MAX_CONNECTIONS=50

# Module-specific PostgreSQL databases
POSTGRES_DB_AUTH=${POSTGRES_DB_AUTH:-erp_auth}
POSTGRES_DB_CRM=${POSTGRES_DB_CRM:-erp_crm}
POSTGRES_DB_HRM=${POSTGRES_DB_HRM:-erp_hrm}
POSTGRES_DB_FINANCE=${POSTGRES_DB_FINANCE:-erp_finance}
POSTGRES_DB_INVENTORY=${POSTGRES_DB_INVENTORY:-erp_inventory}
POSTGRES_DB_PROJECTS=${POSTGRES_DB_PROJECTS:-erp_projects}
POSTGRES_DB_ANALYTICS=${POSTGRES_DB_ANALYTICS:-erp_analytics}

# PostgreSQL connection pool settings (production optimized)
POSTGRES_POOL_MAX_OPEN=100
POSTGRES_POOL_MAX_IDLE=10
POSTGRES_POOL_MAX_LIFETIME=600
POSTGRES_POOL_MAX_IDLE_TIME=300

# MongoDB (Analytics and logs)
MONGODB_HOST=${MONGODB_HOST}
MONGODB_PORT=${MONGODB_PORT:-27017}
MONGODB_USER=${MONGODB_USER}
MONGODB_PASSWORD=${MONGODB_PASSWORD}
MONGODB_AUTH_SOURCE=admin

# Module-specific MongoDB databases
MONGODB_DB_ANALYTICS=${MONGODB_DB_ANALYTICS:-erp_analytics}
MONGODB_DB_LOGS=${MONGODB_DB_LOGS:-erp_logs}
MONGODB_DB_AI=${MONGODB_DB_AI:-erp_ai_conversations}
MONGODB_DB_AUDIT=${MONGODB_DB_AUDIT:-erp_audit_trail}

# MongoDB connection settings (production optimized)
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=5
MONGODB_MAX_IDLE_TIME=300
MONGODB_SERVER_SELECTION_TIMEOUT=30

# Redis (Cache and sessions)
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT:-6379}
REDIS_PASSWORD=${REDIS_PASSWORD}

# Redis database assignments
REDIS_DB_DEFAULT=0
REDIS_DB_SESSIONS=1
REDIS_DB_QUEUES=2
REDIS_DB_WEBSOCKET=3
REDIS_DB_CACHE=4

# Redis connection pool settings (production optimized)
REDIS_POOL_MAX_ACTIVE=50
REDIS_POOL_MAX_IDLE=10
REDIS_POOL_IDLE_TIMEOUT=300
REDIS_DIAL_TIMEOUT=5
REDIS_READ_TIMEOUT=3
REDIS_WRITE_TIMEOUT=3

# ============================================================================
# MESSAGE BROKERS
# ============================================================================

# Kafka
KAFKA_BROKERS=${KAFKA_BROKERS}

# Kafka topics
KAFKA_TOPIC_AUTH=auth-events
KAFKA_TOPIC_USER=user-events
KAFKA_TOPIC_BUSINESS=business-events
KAFKA_TOPIC_SYSTEM=system-events
KAFKA_TOPIC_AI=ai-events
KAFKA_TOPIC_NOTIFICATIONS=notification-events

# Kafka consumer groups
KAFKA_GROUP_AUTH=auth-service-group
KAFKA_GROUP_NOTIFICATION=notification-service-group
KAFKA_GROUP_ANALYTICS=analytics-service-group
KAFKA_GROUP_AUDIT=audit-service-group
KAFKA_GROUP_AI=ai-service-group

# Kafka producer settings (production optimized)
KAFKA_PRODUCER_BATCH_SIZE=65536
KAFKA_PRODUCER_LINGER_MS=5
KAFKA_PRODUCER_COMPRESSION=lz4
KAFKA_PRODUCER_ACKS=all
KAFKA_PRODUCER_RETRIES=10

# Kafka consumer settings (production optimized)
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_AUTO_COMMIT=true
KAFKA_CONSUMER_AUTO_COMMIT_INTERVAL=5000
KAFKA_CONSUMER_SESSION_TIMEOUT=30000
KAFKA_CONSUMER_HEARTBEAT_INTERVAL=3000

# ============================================================================
# VECTOR DATABASE
# ============================================================================

# Qdrant
QDRANT_HOST=${QDRANT_HOST}
QDRANT_HTTP_PORT=${QDRANT_HTTP_PORT:-6333}
QDRANT_GRPC_PORT=${QDRANT_GRPC_PORT:-6334}
QDRANT_API_KEY=${QDRANT_API_KEY}

# Qdrant collections
QDRANT_COLLECTION_DOCUMENTS=erp_documents
QDRANT_COLLECTION_PRODUCTS=erp_products
QDRANT_COLLECTION_CONVERSATIONS=erp_conversations
QDRANT_COLLECTION_KNOWLEDGE=erp_knowledge

# Vector settings
QDRANT_VECTOR_SIZE=384
QDRANT_VECTOR_DISTANCE=Cosine

# ============================================================================
# SEARCH ENGINE
# ============================================================================

# Elasticsearch
ELASTICSEARCH_HOST=${ELASTICSEARCH_HOST}
ELASTICSEARCH_PORT=${ELASTICSEARCH_PORT:-9200}
ELASTICSEARCH_USERNAME=${ELASTICSEARCH_USERNAME}
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD}
ELASTICSEARCH_SCHEME=https

# Elasticsearch indices
ELASTICSEARCH_INDEX_CONTACTS=erp_contacts
ELASTICSEARCH_INDEX_PRODUCTS=erp_products
ELASTICSEARCH_INDEX_DOCUMENTS=erp_documents
ELASTICSEARCH_INDEX_EMPLOYEES=erp_employees
ELASTICSEARCH_INDEX_TRANSACTIONS=erp_transactions

# Elasticsearch settings (production optimized)
ELASTICSEARCH_MAX_RETRIES=5
ELASTICSEARCH_RETRY_ON_STATUS=502,503,504
ELASTICSEARCH_TIMEOUT=60

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Prometheus
PROMETHEUS_HOST=${PROMETHEUS_HOST}
PROMETHEUS_PORT=${PROMETHEUS_PORT:-9090}
PROMETHEUS_METRICS_PATH=/metrics
PROMETHEUS_PUSH_GATEWAY=${PROMETHEUS_PUSH_GATEWAY}

# Grafana
GRAFANA_HOST=${GRAFANA_HOST}
GRAFANA_PORT=${GRAFANA_PORT:-3000}
GRAFANA_USERNAME=${GRAFANA_USERNAME}
GRAFANA_PASSWORD=${GRAFANA_PASSWORD}

# Jaeger
JAEGER_HOST=${JAEGER_HOST}
JAEGER_PORT=${JAEGER_PORT:-16686}
JAEGER_AGENT_PORT=${JAEGER_AGENT_PORT:-6831}
JAEGER_COLLECTOR_ENDPOINT=${JAEGER_COLLECTOR_ENDPOINT}

# Tracing settings (production optimized)
JAEGER_SERVICE_NAME=${SERVICE_NAME:-erp-service}
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1

# ============================================================================
# REAL-TIME COMMUNICATION
# ============================================================================

# WebSocket
WEBSOCKET_HOST=${WEBSOCKET_HOST}
WEBSOCKET_PORT=${WEBSOCKET_PORT:-3001}
WEBSOCKET_PATH=/socket.io/

# WebSocket settings
WEBSOCKET_CORS_ORIGINS=${WEBSOCKET_CORS_ORIGINS}
WEBSOCKET_PING_TIMEOUT=60000
WEBSOCKET_PING_INTERVAL=25000

# ============================================================================
# SECURITY
# ============================================================================

# JWT
JWT_SECRET=${JWT_SECRET}
JWT_ACCESS_EXPIRY=1800
JWT_REFRESH_EXPIRY=86400
JWT_ALGORITHM=HS256

# Encryption
ENCRYPTION_KEY=${ENCRYPTION_KEY}
ENCRYPTION_ALGORITHM=AES-256-GCM

# CORS
CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS}
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin,Content-Type,Authorization,X-Requested-With
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# SERVICE DISCOVERY
# ============================================================================

# Consul
CONSUL_HOST=${CONSUL_HOST}
CONSUL_PORT=${CONSUL_PORT:-8500}
CONSUL_SCHEME=https
CONSUL_DATACENTER=${CONSUL_DATACENTER:-dc1}

# Kubernetes
K8S_NAMESPACE=${K8S_NAMESPACE:-erp-system}
K8S_CLUSTER_DOMAIN=${K8S_CLUSTER_DOMAIN:-cluster.local}

# ============================================================================
# LOGGING
# ============================================================================

# Log configuration (production optimized)
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE=/var/log/erp-service.log

# Log destinations
LOG_ELASTICSEARCH_ENABLED=true
LOG_KAFKA_ENABLED=true

# ============================================================================
# HEALTH CHECKS
# ============================================================================

# Health check settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Feature toggles
FEATURE_AI_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_MONITORING_ENABLED=true
FEATURE_TRACING_ENABLED=true
FEATURE_WEBSOCKET_ENABLED=true

# ============================================================================
# PRODUCTION-SPECIFIC SETTINGS
# ============================================================================

# Performance settings (production optimized)
REQUEST_TIMEOUT=60
CONNECTION_TIMEOUT=30
RATE_LIMIT_ENABLED=true
CACHE_TTL=3600

# Security settings
SECURITY_HEADERS_ENABLED=true
CSRF_PROTECTION_ENABLED=true
XSS_PROTECTION_ENABLED=true

# Resource limits
MAX_REQUEST_SIZE=10MB
MAX_UPLOAD_SIZE=100MB
MAX_CONCURRENT_REQUESTS=1000