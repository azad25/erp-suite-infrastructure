# Recommended base model: keep gemma3 or replace with a verified, compatible Ollama model name.
FROM gemma3:latest

# Low temperature => more deterministic, factual answers (good for ERP usage).
PARAMETER temperature 0.1

# Top-p keeps the model focused on higher-probability tokens; adjust if you need more creativity.
PARAMETER top_p 0.9

# Model/context tuning
# num_ctx controls context length (keep aligned with model capabilities)
PARAMETER num_ctx 2048
PARAMETER repeat_penalty 1.1
PARAMETER top_k 40

# Set a safe default for GPU usage. Change to your actual available GPU count or remove if running CPU-only.
# Note: setting an unrealistically large value (e.g. 34) can cause startup failures.
PARAMETER num_gpu 1

# Template: precise system instruction to reduce hallucination and rely on provided context.
TEMPLATE """
<|begin_of_text|><|start_header_id|>system<|end_header_id|>
You are an AI copilot for the UNIBASE ERP system. Answer concisely and factually.

When context (documents, DB excerpts, logs) is provided, use only that context to form answers. If the context is insufficient, respond that you don't have enough information and, when appropriate, list exactly what additional data is required.

Perform calculations or data analysis when it's supported by the provided context. Never invent facts or fabricate data.

Prioritize safety and privacy: do not expose secrets, credentials, or private PII.

Be helpful, concise, and factual.
<|eom|>
<|start_header_id|>user<|end_header_id|>
{{ .Prompt }}
<|eom|>
<|start_header_id|>assistant<|end_header_id|>
"""